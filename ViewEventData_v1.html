<!DOCTYPE html>
<html lang="en">
<head>
	<title>View Event Data</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->
	<script type="text/javascript" src="js/js/web3.js"></script>
	<script type="text/javascript" src="js/js/bdafunctions.js"></script>

	<script type="text/javascript">
		connectToNetwork();
		connectToContract();
		var auditHTML;
		
		function hideButtonTable() {
			document.getElementById("tableOfButtons").style.display='none' ;
			document.getElementById("tableOfData").style.display='inline' ;
		}
		
		function showButtonTable() {
			document.getElementById("tableOfButtons").style.display='inline' ;
			document.getElementById("tableOfData").style.display='none' ;
		}
		
		function fneRegisteredLand() 
		{	
			hideButtonTable();
			var RegisteredLandEvent = myContractInstance.eRegisteredLand({},{fromBlock: 0, toBlock: 'latest'});
			
			RegisteredLandEvent.get(function(err, res) { 
			if (!err) {
				auditHTML = "<table data-vertable=\"ver1\">"
						+"<thead>"
							+"<tr class=\"row100 head\">"
								+"<th class=\"column100 column1\" data-column=\"column1\">projLocation</th>"
								+"<th class=\"column100 column2\" data-column=\"column2\">name</th>"
								+"<th class=\"column100 column3\" data-column=\"column3\">id</th>"
								+"<th class=\"column100 column4\" data-column=\"column4\">surveyNumber</th>"
								+"<th class=\"column100 column5\" data-column=\"column5\">nocStatus</th>"
								+"<th class=\"column100 column6\" data-column=\"column6\">lakeAuthApproverStatus</th>"
								+"<th class=\"column100 column7\" data-column=\"column7\">lakeAuthComments</th>"
								+"<th class=\"column100 column8\" data-column=\"column8\">forestAuthApproverStatus</th>"
								+"<th class=\"column100 column8\" data-column=\"column9\">forestAuthComments</th>"
								+"<th class=\"column100 column8\" data-column=\"column10\">Date/Time</th>"
							+"</tr>"
						+"</thead>"
						+"<tbody>";
				for (var i = 0; i < res.length; i++) {
					auditHTML +="<tr class=\"row100\">"
								+"<td class=\"column100 column1\" data-column=\"column1\">"+res[i].args.projLocation+"</td>"
								+"<td class=\"column100 column2\" data-column=\"column2\">"+res[i].args.name+"</td>"
								+"<td class=\"column100 column3\" data-column=\"column3\">"+web3.toUtf8(res[i].args.id)+"</td>"
								+"<td class=\"column100 column4\" data-column=\"column4\">"+res[i].args.surveyNumber+"</td>"
								+"<td class=\"column100 column5\" data-column=\"column5\">"+nocStatusDecode(res[i].args.nocStatus)+"</td>"
								+"<td class=\"column100 column6\" data-column=\"column6\">"+approverStatusDecode(res[i].args.lakeAuthApproverStatus)+"</td>"
								+"<td class=\"column100 column7\" data-column=\"column7\">"+res[i].args.lakeAuthComments+"</td>"
								+"<td class=\"column100 column8\" data-column=\"column8\">"+approverStatusDecode(res[i].args.forestAuthApproverStatus)+"</td>"
								+"<td class=\"column100 column8\" data-column=\"column9\">"+res[i].args.forestAuthComments+"</td>"
								+"<td class=\"column100 column8\" data-column=\"column10\">"+new Date( res[i].args.datetime  *1000).toLocaleString()+"</td>"
							+"</tr>";
				}
				auditHTML += "</tbody></table>"
								+ "<button type=\"button\" onClick=\"showButtonTable();\" ><b>Go Back</b></button>"
				document.getElementById("idReturnValue").innerHTML = auditHTML;

				return;
				
			  }
			});
			
			RegisteredLandEvent.stopWatching();
			
		}
		function fneRequestForNOC() 
		{
			hideButtonTable();
			var RequestForNOCEvent = myContractInstance.eRequestForNOC({},{fromBlock: 0, toBlock: 'latest'});
			
			RequestForNOCEvent.get(function(err, res) { //changed watch to get
			if (!err) {
				auditHTML = "<table data-vertable=\"ver1\">"
						+"<thead>"
							+"<tr class=\"row100 head\">"
								+"<th class=\"column100 column1\" data-column=\"column1\">projLocation</th>"
								+"<th class=\"column100 column2\" data-column=\"column2\">name</th>"
								+"<th class=\"column100 column3\" data-column=\"column3\">id</th>"
								+"<th class=\"column100 column4\" data-column=\"column4\">surveyNumber</th>"
								+"<th class=\"column100 column5\" data-column=\"column5\">nocStatus</th>"
								+"<th class=\"column100 column6\" data-column=\"column6\">lakeAuthApproverStatus</th>"
								+"<th class=\"column100 column7\" data-column=\"column7\">lakeAuthComments</th>"
								+"<th class=\"column100 column8\" data-column=\"column8\">forestAuthApproverStatus</th>"
								+"<th class=\"column100 column8\" data-column=\"column9\">forestAuthComments</th>"
								+"<th class=\"column100 column8\" data-column=\"column10\">Date/Time</th>"
							+"</tr>"
						+"</thead>"
						+"<tbody>";

				for (var i = 0; i < res.length; i++) {
					auditHTML +="<tr class=\"row100\">"
								+"<td class=\"column100 column1\" data-column=\"column1\">"+res[i].args.projLocation+"</td>"
								+"<td class=\"column100 column2\" data-column=\"column2\">"+res[i].args.name+"</td>"
								+"<td class=\"column100 column3\" data-column=\"column3\">"+web3.toUtf8(res[i].args.id)+"</td>"
								+"<td class=\"column100 column4\" data-column=\"column4\">"+res[i].args.surveyNumber+"</td>"
								+"<td class=\"column100 column5\" data-column=\"column5\">"+nocStatusDecode(res[i].args.nocStatus)+"</td>"
								+"<td class=\"column100 column6\" data-column=\"column6\">"+approverStatusDecode(res[i].args.lakeAuthApproverStatus)+"</td>"
								+"<td class=\"column100 column7\" data-column=\"column7\">"+res[i].args.lakeAuthComments+"</td>"
								+"<td class=\"column100 column8\" data-column=\"column8\">"+approverStatusDecode(res[i].args.forestAuthApproverStatus)+"</td>"
								+"<td class=\"column100 column8\" data-column=\"column9\">"+res[i].args.forestAuthComments+"</td>"
								+"<td class=\"column100 column8\" data-column=\"column10\">"+new Date( res[i].args.datetime  *1000).toLocaleString()+"</td>"
							+"</tr>";
				}
				auditHTML += "</tbody></table>"
								+ "<button type=\"button\" onClick=\"showButtonTable();\" ><b>Go Back</b></button>"
				document.getElementById("idReturnValue").innerHTML = auditHTML;

				return;
				
			  }
			});
			
			RequestForNOCEvent.stopWatching();
			
		}	
		
		function fneApprovalStatus() 
		{
			hideButtonTable();
			var ApprovalStatusEvent = myContractInstance.eApprovalStatus({},{fromBlock: 0, toBlock: 'latest'});
			
			//createdEventresult = 
			ApprovalStatusEvent.get(function(err, res) { //changed watch to get
			if (!err) {
				auditHTML = "<table data-vertable=\"ver1\">"
						+"<thead>"
							+"<tr class=\"row100 head\">"
								+"<th class=\"column100 column1\" data-column=\"column1\">projLocation</th>"
								+"<th class=\"column100 column2\" data-column=\"column2\">name</th>"
								+"<th class=\"column100 column4\" data-column=\"column3\">surveyNumber</th>"
								+"<th class=\"column100 column5\" data-column=\"column4\">nocStatus</th>"
								+"<th class=\"column100 column6\" data-column=\"column5\">lakeAuthApproverStatus</th>"
								+"<th class=\"column100 column7\" data-column=\"column6\">lakeAuthComments</th>"
								+"<th class=\"column100 column8\" data-column=\"column7\">forestAuthApproverStatus</th>"
								+"<th class=\"column100 column8\" data-column=\"column8\">forestAuthComments</th>"
								+"<th class=\"column100 column8\" data-column=\"column9\">Date/Time</th>"
							+"</tr>"
						+"</thead>"
						+"<tbody>";
		
				for (var i = 0; i < res.length; i++) {
					auditHTML +="<tr class=\"row100\">"
								+"<td class=\"column100 column1\" data-column=\"column1\">"+res[i].args.projLocation+"</td>"
								+"<td class=\"column100 column2\" data-column=\"column2\">"+res[i].args.name+"</td>"
								+"<td class=\"column100 column4\" data-column=\"column3\">"+res[i].args.surveyNumber+"</td>"
								+"<td class=\"column100 column5\" data-column=\"column4\">"+nocStatusDecode(res[i].args.nocStatus)+"</td>"
								+"<td class=\"column100 column6\" data-column=\"column5\">"+approverStatusDecode(res[i].args.lakeAuthApproverStatus)+"</td>"
								+"<td class=\"column100 column7\" data-column=\"column6\">"+res[i].args.lakeAuthComments+"</td>"
								+"<td class=\"column100 column8\" data-column=\"column7\">"+approverStatusDecode(res[i].args.forestAuthApproverStatus)+"</td>"
								+"<td class=\"column100 column8\" data-column=\"column8\">"+res[i].args.forestAuthComments+"</td>"
								+"<td class=\"column100 column8\" data-column=\"column9\">"+new Date( res[i].args.datetime  *1000).toLocaleString()+"</td>"
							+"</tr>";
				}
				auditHTML += "</tbody></table>"
								+ "<button type=\"button\" onClick=\"showButtonTable();\" ><b>Go Back</b></button>"
				document.getElementById("idReturnValue").innerHTML = auditHTML;

				return;
				
			  }
			});
			
			ApprovalStatusEvent.stopWatching();
			
		}
		
	</script>

<!--===============================================================================================-->


</head>
<body>
	<div class="limiter">
		<div class="container-table100">
			<div class="wrap-table100">
				<div class="table100 ver1 m-b-110"  id="tableOfButtons">
					<table data-vertable="ver1" width="100%">
						<tr class="row100">
							<td class="column100 column2" data-column="column1"><button type="button" onClick="fneRegisteredLand();" id="btnSetString">eRegisteredLand</button></td>
							<td class="column100 column2" data-column="column2"><button type="button" onClick="fneRequestForNOC();" id="btnSetString">eRequestForNOC</button></td>
							<td class="column100 column2" data-column="column3"><button type="button" onClick="fneApprovalStatus();" id="btnSetString">eApprovalStatus</button></td>
						</tr>		
					</table>
				</div>
				<div class="table100 ver1 m-b-110"  id="tableOfData">
					<div id="idReturnValue">
				<div>
			</div>
		</div>
	</div>


	

<!--===============================================================================================-->	
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
	<script src="js/main.js"></script>

</body>
</html>